#########################################################################
#        This Perl script is Copyright (c) 2001, Peter J Billam         #
#               c/o P J B Computing, www.pjb.com.au                     #
#                                                                       #
#     This program is free software; you can redistribute it and/or     #
#            modify it under the same terms as Perl itself.             #
#########################################################################
require './Tea.raw';  import Crypt::Tea;

my $text = <<EOT;
Hier lieg' ich auf dem Frülingshügel:
die Wolke wird mein Flügel,
ein Vogel fliegt mir voraus.

Ach, sag' mir, all-einzige Liebe,
wo du bleibst, daß ich bei dir bliebe !
doch du und die Lüfte, ihr habt kein Haus.

Der Sonnenblume gleich steht mein Gemüthe offen,
sehnend, sich dehnend in Lieben und Hoffen.
Frühling, was bist du gewillt ?
wenn werd' ich gestillt ?

Die Wolke seh' ich wandeln und den Fluß,
es dringt der Sonne goldner Kuß tief bis in's Geblüt hinein;
die Augen, wunderbar berauschet, thun, als scliefen sie ein,
nur noch das Ohr der Ton der Biene lauschet.

Ich denke Diess und denke Das,
ich sehne mich, und weiss nicht recht, nach was:
halb ist es Lust, halb ist es Klage;
mein Herz, o sage,
was webst du für Erinnerung
in goldnen grüner Zweige Dämmerung ?

Alte, unnennbare Tage !
EOT

my $d = &asciidigest ($text); 
if ($d eq '5sO762E_kw3WK++EiHhHiA') {
	print "asciidigest OK ...\n";
} else {
	print "ERROR: asciidigest was $d, should be 5sO762E_kw3WK++EiHhHiA\n";
	exit 1;
}

$key = &asciidigest ("G $$ ". time);
my $c = &encrypt ($text, $key); 
my $p = &decrypt ($c, $key);
if ($p eq $text) {
	print "encrypt and decrypt OK ...\n";
} else {
	print "ERROR: encrypt and decrypt failed: encrypt was\n$c\n";
	exit 1;
}
exit 0;

__END__

# POD Documentation (perldoc or pod2html this file)
=head1 NAME

test - Perl script to test Crypt::Tea.pm

=head1 SYNOPSIS

  make test

=head1 DESCRIPTION

This tests the Crypt::Tea.pm module, version #VERSION#

=head1 AUTHOR

Peter J Billam <computing@pjb.com.au>

=head1 SEE ALSO

http://www.pjb.com.au/, http://www.cpan.org, perl(1).

=cut

